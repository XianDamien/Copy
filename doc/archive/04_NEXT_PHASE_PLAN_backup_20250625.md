# Phase 7 计划: 核心体验加固与智能化深化

## 概述
在Phase 6成功重构了核心复习体验后，Phase 7的目标是加固现有成果，并在此基础上进行下一阶段的智能化功能探索。我们将优先保证产品的稳定性和质量，再进行功能扩展。

## 核心任务

### Task 49: 全面测试覆盖与技术债清理
- **目标**: 为在Phase 6中重构的`Review.tsx`及相关组件编写全面的集成测试，确保其稳定性。同时，修复或移除剩余的过时测试。
- **具体行动**:
    1. 编写`Review.test.tsx`集成测试，模拟完整的学习流程（任务模式、传统模式、重试队列、导航、编辑）。
    2. 修复`npm test`中报告的所有失败测试。
    3. 审计`src/tests`目录，移除不再有价值的旧测试文件。
- **预期收益**: 测试套件100%通过，为未来的迭代提供安全保障。

### Task 50: AI辅助任务评估
- **目标**: 在当前稳定的任务模式基础上，为用户的翻译任务提供智能反馈。
- **核心功能**:
    1. 用户提交翻译后，调用AI模型（如Gemini）将其与标准答案进行比对。
    2. AI返回评估结果，如"优秀"、"基本正确但有优化空间"、"有误"，并提供简短的改进建议。
    3. 将AI反馈以非侵入式的方式展示给用户。
- **技术实现**: 复用已有的`geminiService`，增加新的评估prompt。
- **预期收益**: 将AnGear从"任务完成"工具升级为"智能辅导"工具，形成学习闭环。

### Task 51: Deck管理界面现代化
- **目标**: 重构陈旧的`DeckList`和`NoteEditor`界面，使其UI风格和技术实现与`Review`界面对齐。
- **具体行动**:
    1. 使用与`Review`界面相同的UI组件和设计语言重新设计牌组列表。
    2. 替换旧的表单和编辑逻辑，可能引入Tiptap编辑器。
    3. 修复相关的旧测试（或用新测试替换）。
- **预期收益**: 提供统一、现代、高效的全流程用户体验。

### Task 52: 性能与体验遥测
- **目标**: 引入基础的、保护用户隐私的遥测系统，以数据驱动未来优化。
- **收集指标 (匿名聚合)**:
    - 学习会话平均时长。
    - 任务模式 vs 传统模式使用比例。
    - 卡片在重试队列中的平均次数。
- **技术实现**: 创建一个简单的`telemetryService`，在特定用户操作时触发，并将数据聚合后发送到分析服务。
- **预期收益**: 获取真实的用户行为数据，为后续产品决策提供依据。

## 实施策略与优先级
1. **P0 (最高)**: Task 49 (测试覆盖) - **质量基石，必须最先完成。**
2. **P1 (高)**: Task 51 (Deck管理界面) - **统一用户体验，修复已知问题。**
3. **P2 (中)**: Task 50 (AI辅助评估) - **核心功能增强，可在P1后进行。**
4. **P3 (低)**: Task 52 (遥测) - **长期价值，可在其他任务间隙进行。**

---
*最后更新：2025年6月25日*
*文档版本：2.0* 